"use strict";(self.webpackChunklearning_threejs_baz=self.webpackChunklearning_threejs_baz||[]).push([[826],{174:(e,t,a)=>{var s=a(212);function o(e){e.target.remove()}var n=a(79),i=a(11),r=a(365);const d=function(){const e=new s.lLk;return e.onStart=function(e,t,a){console.log("Started loading file: "+e+".\nLoaded "+t+" of "+a+" files.")},e.onLoad=function(){console.log("Loading complete!");const e=document.getElementById("loading-screen");e.classList.add("fade-out"),e.addEventListener("transitionend",o);const t=document.querySelector("[data-color-picker]"),a=document.querySelectorAll("[data-swatch]");t.classList.remove("hidden"),a.forEach((e=>{e.classList.add("appear")}))},e.onProgress=function(e,t,a){console.log(e,t,a),console.log("Loaded:",Math.round(t/a*100,2)+"%")},e.onError=function(e){console.log("There was an error loading "+e)},e}(),h=function(e){var t=new n.Z;return t.showPanel(0),document.body.appendChild(t.dom),t}(),c=function(e){const t=new s.CP7({powerPreference:"high-performance",alpha:!0});return t.setSize(window.innerWidth,window.innerHeight),t.shadowMap.enabled=!0,t.shadowMapSoft=!0,t.shadowMap.type=s.ntZ,t.physicallyCorrectLights=!0,t.toneMapping=s.LY2,t.gammaFactor=2.2,t.outputEncoding=s.knz,document.getElementById("webgl-output").appendChild(t.domElement),t}(),l=function(e){var t=void 0!==e?e:new s.Pa4(0,22,50),a=new s.cPb(45,window.innerWidth/window.innerHeight,1,1e3);return a.position.copy(t),a.lookAt(new s.Pa4(0,0,0)),a}(new s.Pa4(-20,22,62)),m=new class{constructor(e){this.scene=new s.xsS,this.objLoader=new i.L(e),this.objLoader.setPath("assets/"),this.textureLoader=new s.dpR(e),this.textureLoader.setPath("assets/"),this.materials={shadowMaterial:new s.Tn7({opacity:.6}),chrome:new s.Wid({color:16777215,metalness:.15,roughness:.05})},this.pickableMeshes=[];const t=new s._12(500,500);t.rotateX(-Math.PI/2);const a=new s.Kj0(t,this.materials.shadowMaterial);a.position.y=-52,a.receiveShadow=!0,this.scene.add(a),this.toaster(),this.environmentMap()}grid(){const e=new s.VLJ(50,10);e.material.transparent=!0,e.material.opacity=.25,this.scene.add(e)}skybox(){const e=this.textureLoader.load("environments/CT-office-2k-sharper-90.webp");e.mapping=s.dSO,this.scene.background=e}environmentMap(){this.textureLoader.load("environments/CT-office-2k-sharper-90.webp",(e=>{e.mapping=s.dSO,e.encoding=s.knz,this.scene.environment=e}))}cube(){this.objLoader.load("cube/cube1m.obj",(e=>{e.name="cube-1m",e.traverse((function(e){e.castShadow=!0})),e.children.forEach((e=>{e.material=this.materials.chrome,this.pickableMeshes.push(e)})),e.scale.set(.2,.2,.2),this.scene.add(e)}))}toaster(){this.materials.toaster=new s.Wid({normalMap:this.textureLoader.load("models/toaster/textures/v2/jpg/toaster_low_material_Normal.jpg"),metalnessMap:this.textureLoader.load("models/toaster/textures/v2/jpg/toaster_low_material_Metallic.jpg"),metalness:1,roughnessMap:this.textureLoader.load("models/toaster/textures/v2/jpg/toaster_low_material_Roughness.jpg"),aoMap:this.textureLoader.load("models/toaster/textures/v2/jpg/toaster_low_material_Occlusion.jpg"),aoMapIntensity:.75,map:this.textureLoader.load("models/toaster/textures/v2/jpg/toaster_low_material_BaseColor.jpg")}),this.materials.toaster.map.encoding=s.knz,this.materials.toasterBody=this.materials.toaster.clone(),this.materials.toasterBody.roughness=1.05,this.materials.toasterBody.color.setStyle("#d3e4e6");const e=new s.ZAu;e.name="toaster",this.scene.add(e),this.objLoader.load("models/toaster/toaster.obj",(t=>{const a=t.children[0];a.geometry.attributes.uv2=a.geometry.attributes.uv,a.castShadow=!0,a.receiveShadow=!0,a.material=this.materials.toaster,this.pickableMeshes.push(a),e.add(a)})),this.objLoader.load("models/toaster/toaster_body.obj",(t=>{const a=t.children[0];a.geometry.attributes.uv2=a.geometry.attributes.uv,a.castShadow=!0,a.receiveShadow=!0,a.material=this.materials.toasterBody,this.pickableMeshes.push(a),e.add(a)}))}}(d),p=m.scene,u=new s.SUY,w=new r.z(l,c.domElement);w.target.y=-5,w.enablePan=!1,w.minDistance=35,w.maxDistance=120,w.minPolarAngle=s.M8C.degToRad(30),w.maxPolarAngle=s.M8C.degToRad(120),w.autoRotate=!0,w.enableDamping=!0;const g=new class{constructor(e,t){this.scene=e,this.gizmo=t,this.createLight(e,0,s.M8C.degToRad(0),1e4,!0),this.createLight(e,1.41,1.35,2e4),this.createLight(e,.6,1.15,3e4),this.createLight(e,-.43,1.09,2e4),this.createLight(e,-1.2,1.3,4e4),this.createLight(e,-2.6,1.1,3e4),this.createLight(e,-2.99,.87,4e4),this.createLight(e,2.1,.78,4e4)}createLight(e,t,a,o,n,i){const r=new s.ZAu;r.rotateY(t),e.add(r);const d=new s.ZAu;d.rotateX(a),r.add(d);const h=new s.ZAu;h.position.set(0,500,0),d.add(h);const c=new s.PMe;c.color=new s.Ilk("rgb(255, 245, 200)"),c.intensity=o,c.decay=2,c.angle=.3,n&&(c.castShadow=!0,c.shadow.camera.near=400,c.shadow.camera.far=600,c.shadow.focus=1.3),h.add(c),i&&(r.name="pivotRotate",d.name="pivotHeight",h.name="lightArm",c.name="spotLight1",i.attach(d),i.setMode("rotate"),i.setSpace("local"),e.add(i),this.spotLightHelper=new s.FvO(c),e.add(this.spotLightHelper),this.shadowHelper=new s.Rki(c.shadow.camera),e.add(this.shadowHelper))}update(){this.spotLightHelper&&this.spotLightHelper.update(),this.shadowHelper&&this.shadowHelper.update()}}(p);new class{constructor(e){this.materials=e,this.initComponents(),this.bindEvents()}initComponents(){this.el=document.querySelector("[data-color-picker]"),this.swatches=document.querySelectorAll("[data-swatch]")}bindEvents(){this.swatches.forEach((e=>{e.addEventListener("click",(t=>{const a=e.dataset.swatch;this.materials.toasterBody.color.setStyle(a),"#d3e4e6"==a?(this.materials.toasterBody.metalness=1,this.materials.toasterBody.roughness=1.05):(this.materials.toasterBody.metalness=.05,this.materials.toasterBody.roughness=1.2)}))}))}render(){this.el.classList.remove("hidden"),this.swatches.forEach((e=>{e.classList.add("appear")}))}}(m.materials);let L=0;window.addEventListener("resize",(function(){l.aspect=window.innerWidth/window.innerHeight,l.updateProjectionMatrix(),c.setSize(window.innerWidth,window.innerHeight)}),!1),function e(){const t=u.getDelta();h.update(),w.update(t),g.update(),L+=.05;const a=m.scene.getObjectByName("toaster");a&&(a.position.y=.15*Math.sin(L)),c.render(m.scene,l),window.requestAnimationFrame(e)}()}},e=>{e.O(0,[813],(()=>(174,e(e.s=174)))),e.O()}]);