"use strict";(self.webpackChunklearning_threejs_baz=self.webpackChunklearning_threejs_baz||[]).push([[826],{447:(e,t,s)=>{var n=s(212);function o(e){e.target.remove()}var i=s(79),a=s(11);class r{constructor(e){this.scene=new n.xsS,this.objLoader=new a.L(e),this.objLoader.setPath("assets/models/"),this.textureLoader=new n.dpR(e),this.textureLoader.setPath("assets/textures/"),this.materials={materialOne:new n.Wid({color:16777215,metalness:.15,roughness:.05})},this.pickableMeshes=[],this.cube()}skybox(){const e=this.textureLoader.load("photosphere/CT-office.jpg");e.mapping=n.dSO,this.scene.background=e}environmentMap(){this.textureLoader.load("photosphere/CT-office-2k-sharper-90.webp",(e=>{e.mapping=n.dSO,this.scene.environment=e}))}cube(){this.objLoader.load("cube/cube1m.obj",(e=>{e.name="cube-1m",e.children.forEach((e=>{e.material=this.materials.materialOne,this.pickableMeshes.push(e)})),e.scale.set(.2,.2,.2),this.scene.add(e)}))}toaster(){const e=new n.ZAu;e.name="toaster",this.scene.add(e),this.objLoader.load("smeg-toaster/smeg-toaster-body.obj",(t=>{t.name="toaster-body",t.children.forEach((e=>{e.material=this.materials.materialOne,e.geometry.castShadow=!0,e.geometry.receiveShadow=!0,this.pickableMeshes.push(e)})),e.add(t)})),this.objLoader.load("smeg-toaster/smeg-toaster-lever.obj",(t=>{t.name="toaster-lever",t.children.forEach((e=>{e.material=this.materials.materialOne,e.geometry.castShadow=!0,e.geometry.receiveShadow=!0,this.pickableMeshes.push(e)})),e.add(t)}))}}class c{constructor(e,t,s){this.scene=e,this.camera=t,this.mouse=new n.FM8,this.raycaster=new n.iMs,this.pickableMeshes=s,this.rayMaterial=new n.vBJ({color:16711680,transparent:!0,opacity:.6}),this.ray=null,this.initComponents(),this.bindEvents()}initComponents(){this.clickableArea=document.querySelector("#webgl-output")}bindEvents(){this.clickableArea.addEventListener("mousemove",this.updateMousePosition.bind(this),!1),this.clickableArea.addEventListener("mousedown",this.pickObject.bind(this),!1)}updateMousePosition(e){this.mouse.x=e.clientX/window.innerWidth*2-1,this.mouse.y=-e.clientY/window.innerHeight*2+1}pickObject(e){this.raycaster.setFromCamera(this.mouse,this.camera);const t=this.raycaster.intersectObjects(this.pickableMeshes);t.length>0&&console.log("Picked:",t[0].object)}update(e){if(!e)return;this.raycaster.setFromCamera(this.mouse,this.camera);const t=this.raycaster.intersectObjects(this.pickableMeshes);if(t.length>0){this.ray&&this.scene.remove(this.ray);const e=this.camera.position.clone();e.y=e.y-.2;const s=[];s.push(e),s.push(t[0].point);const o=new n.WXh(new n.YT8(s),60,.001);this.ray=new n.Kj0(o,this.rayMaterial),this.scene.add(this.ray)}}}s(268);class d{constructor(e){this.materials=e,console.log("ColourPicker",this.materials),this.initComponents(),this.bindEvents()}initComponents(){this.swatches=document.querySelectorAll("[data-swatch]")}bindEvents(){this.swatches.forEach((e=>{e.addEventListener("click",(()=>{const t=getComputedStyle(e);this.materials.materialOne.color.setStyle(t.backgroundColor)}))}))}}var h=s(365);document.addEventListener("DOMContentLoaded",(function(){const e=function(){const e=new n.lLk;return e.onStart=function(e,t,s){console.log("Started loading file: "+e+".\nLoaded "+t+" of "+s+" files.")},e.onLoad=function(){console.log("Loading complete!");const e=document.getElementById("loading-screen");e.classList.add("fade-out"),e.addEventListener("transitionend",o)},e.onProgress=function(e,t,s){console.log(e,t,s),console.log("Loaded:",Math.round(t/s*100,2)+"%")},e.onError=function(e){console.log("There was an error loading "+e)},e}(),t=function(e){var t=new i.Z;return t.showPanel(0),document.body.appendChild(t.dom),t}(),s=function(e){var t={},s=new n.CP7(t);return s.setSize(window.innerWidth,window.innerHeight),s.setClearColor(new n.Ilk(0)),s.shadowMap.enabled=!0,s.shadowMapSoft=!0,s.shadowMap.type=n.ntZ,s.physicallyCorrectLights=!0,document.getElementById("webgl-output").appendChild(s.domElement),s}(),a=function(e){var t=void 0!==e?e:new n.Pa4(0,22,50),s=new n.cPb(45,window.innerWidth/window.innerHeight,.1,1e3);return s.position.copy(t),s.lookAt(new n.Pa4(0,0,0)),s}(new n.Pa4(-20,22,48)),l=new r(e),u=(function(e){const t=new n.vmT(11773855,6509891,3);t.position.set(0,150,0),t.intensity=.6,e.add(t);const s=new n.cek(16777177,5e4);s.position.set(180,100,200),s.decay=2,s.castShadow=!0,e.add(s);const o=new n.cek(16777177,5e4);o.position.set(-180,120,220),o.decay=2,o.castShadow=!0,e.add(o);const i=new n.cek(16777177,2e4);i.position.set(190,150,-250),i.decay=2,i.castShadow=!0,e.add(i);const a=new n.cek(16777177,2e4);a.position.set(30,150,-400),a.decay=2,a.castShadow=!0,e.add(a);const r=new n.cek(16777177,2e4);r.position.set(-180,150,-250),r.decay=2,r.castShadow=!0,e.add(r)}(l.scene),new n.SUY),w=new h.z(a,s.domElement);w.autoRotate=!0,new c(l.scene,a,l.pickableMeshes),new d(l.materials),window.addEventListener("resize",(function(){a.aspect=window.innerWidth/window.innerHeight,a.updateProjectionMatrix(),s.setSize(window.innerWidth,window.innerHeight)}),!1),function e(){const n=u.getDelta();t.update(),w.update(n),s.render(l.scene,a),window.requestAnimationFrame(e)}()}))}},e=>{e.O(0,[813],(()=>(447,e(e.s=447)))),e.O()}]);