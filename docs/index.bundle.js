"use strict";(self.webpackChunklearning_threejs_baz=self.webpackChunklearning_threejs_baz||[]).push([[826],{447:(e,t,s)=>{var n=s(212);function a(e){e.target.remove()}var o=s(79),i=s(11);class r{constructor(e){this.scene=new n.xsS,this.objLoader=new i.L(e),this.objLoader.setPath("assets/models/"),this.textureLoader=new n.dpR(e),this.textureLoader.setPath("assets/textures/"),this.materials={shadowMaterial:new n.Tn7({opacity:.6}),chrome:new n.Wid({color:16777215,metalness:.15,roughness:.05})},this.pickableMeshes=[];const t=new n.VLJ(50,10);t.material.transparent=!0,t.material.opacity=.25;const s=new n._12(500,500);s.rotateX(-Math.PI/2);const a=new n.Kj0(s,this.materials.shadowMaterial);a.position.y=-52,a.receiveShadow=!0,this.scene.add(a),this.cube()}skybox(){const e=this.textureLoader.load("photosphere/CT-office.jpg");e.mapping=n.dSO,this.scene.background=e}environmentMap(){this.textureLoader.load("photosphere/CT-office-2k-sharper-90.webp",(e=>{e.mapping=n.dSO,this.scene.environment=e}))}cube(){this.objLoader.load("cube/cube1m.obj",(e=>{e.name="cube-1m",e.traverse((function(e){e.castShadow=!0})),e.children.forEach((e=>{e.material=this.materials.chrome,this.pickableMeshes.push(e)})),e.scale.set(.2,.2,.2),this.scene.add(e)}))}toaster(){const e=new n.ZAu;e.name="toaster",this.scene.add(e),this.objLoader.load("smeg-toaster/smeg-toaster-body.obj",(t=>{t.name="toaster-body",t.traverse((function(e){e.castShadow=!0,e.receiveShadow=!0})),t.children.forEach((e=>{e.material=this.materials.chrome,this.pickableMeshes.push(e)})),e.add(t)})),this.objLoader.load("smeg-toaster/smeg-toaster-lever.obj",(t=>{t.name="toaster-lever",t.traverse((function(e){e.castShadow=!0,e.receiveShadow=!0})),t.children.forEach((e=>{e.material=this.materials.chrome,this.pickableMeshes.push(e)})),e.add(t)}))}}class c{constructor(e,t,s){this.scene=e,this.camera=t,this.mouse=new n.FM8,this.raycaster=new n.iMs,this.pickableMeshes=s,this.rayMaterial=new n.vBJ({color:16711680,transparent:!0,opacity:.6}),this.ray=null,this.initComponents(),this.bindEvents()}initComponents(){this.clickableArea=document.querySelector("#webgl-output")}bindEvents(){this.clickableArea.addEventListener("mousemove",this.updateMousePosition.bind(this),!1),this.clickableArea.addEventListener("mousedown",this.pickObject.bind(this),!1)}updateMousePosition(e){this.mouse.x=e.clientX/window.innerWidth*2-1,this.mouse.y=-e.clientY/window.innerHeight*2+1}pickObject(e){this.raycaster.setFromCamera(this.mouse,this.camera);const t=this.raycaster.intersectObjects(this.pickableMeshes);t.length>0&&console.log("Picked:",t[0].object)}update(e){if(!e)return;this.raycaster.setFromCamera(this.mouse,this.camera);const t=this.raycaster.intersectObjects(this.pickableMeshes);if(t.length>0){this.ray&&this.scene.remove(this.ray);const e=this.camera.position.clone();e.y=e.y-.2;const s=[];s.push(e),s.push(t[0].point);const a=new n.WXh(new n.YT8(s),60,.001);this.ray=new n.Kj0(a,this.rayMaterial),this.scene.add(this.ray)}}}s(268);class d{constructor(e){this.materials=e,console.log("ColourPicker",this.materials),this.initComponents(),this.bindEvents()}initComponents(){this.swatches=document.querySelectorAll("[data-swatch]")}bindEvents(){this.swatches.forEach((e=>{e.addEventListener("click",(()=>{const t=getComputedStyle(e);this.materials.chrome.color.setStyle(t.backgroundColor)}))}))}}var h=s(365);document.addEventListener("DOMContentLoaded",(function(){const e=function(){const e=new n.lLk;return e.onStart=function(e,t,s){console.log("Started loading file: "+e+".\nLoaded "+t+" of "+s+" files.")},e.onLoad=function(){console.log("Loading complete!");const e=document.getElementById("loading-screen");e.classList.add("fade-out"),e.addEventListener("transitionend",a)},e.onProgress=function(e,t,s){console.log(e,t,s),console.log("Loaded:",Math.round(t/s*100,2)+"%")},e.onError=function(e){console.log("There was an error loading "+e)},e}(),t=function(e){var t=new o.Z;return t.showPanel(0),document.body.appendChild(t.dom),t}(),s=function(e){const t=new n.CP7({alpha:!0});return t.setSize(window.innerWidth,window.innerHeight),t.shadowMap.enabled=!0,t.shadowMapSoft=!0,t.shadowMap.type=n.ntZ,t.physicallyCorrectLights=!0,document.getElementById("webgl-output").appendChild(t.domElement),t}(),i=function(e){var t=void 0!==e?e:new n.Pa4(0,22,50),s=new n.cPb(45,window.innerWidth/window.innerHeight,.1,1e3);return s.position.copy(t),s.lookAt(new n.Pa4(0,0,0)),s}(new n.Pa4(-20,22,62)),l=new r(e),w=(function(e){const t=new n.vmT(11773855,6509891,3);t.position.set(0,150,0),t.intensity=.6,e.add(t);const s=new n.cek(16777177,0);s.name="shadow",s.position.set(0,150,0),s.decay=2,s.castShadow=!0,s.shadow.camera.near=5,s.shadow.camera.far=500,s.shadow.radius=20,s.shadow.mapSize.width=1024,s.shadow.mapSize.height=1024,e.add(s),new n.Rki(s.shadow.camera);const a=new n.cek(16777177,5e4);a.position.set(180,100,200),a.decay=2,e.add(a);const o=new n.cek(16777177,5e4);o.position.set(-180,120,220),o.decay=2,e.add(o);const i=new n.cek(16777177,2e4);i.position.set(190,150,-250),i.decay=2,e.add(i);const r=new n.cek(16777177,2e4);r.position.set(30,150,-400),r.decay=2,e.add(r);const c=new n.cek(16777177,2e4);c.position.set(-180,150,-250),c.decay=2,e.add(c)}(l.scene),new n.SUY),m=new h.z(i,s.domElement);m.target.y=-5,m.enablePan=!1,m.minDistance=35,m.maxDistance=120,m.minPolarAngle=n.M8C.degToRad(30),m.maxPolarAngle=n.M8C.degToRad(120),m.autoRotate=!0,m.enableDamping=!0,new c(l.scene,i,l.pickableMeshes),new d(l.materials),window.addEventListener("resize",(function(){i.aspect=window.innerWidth/window.innerHeight,i.updateProjectionMatrix(),s.setSize(window.innerWidth,window.innerHeight)}),!1),function e(){const n=w.getDelta();t.update(),m.update(n),s.render(l.scene,i),window.requestAnimationFrame(e)}()}))}},e=>{e.O(0,[813],(()=>(447,e(e.s=447)))),e.O()}]);